# name: test/sql/storage/attach_create_if_exists.test
# description:
# group: [sqlite_storage]

require sqlite_scanner

statement ok
ATTACH '__TEST_DIR__/attach_create_if_exists.db' AS s1 (TYPE SQLITE)

statement ok
CREATE TABLE s1.test(i INTEGER);

statement ok
CREATE TABLE IF NOT EXISTS s1.test(i INTEGER);

statement ok
CREATE OR REPLACE TABLE s1.test(j INTEGER);

statement ok
SELECT j FROM s1.test

# create or replace view
statement ok
CREATE OR REPLACE VIEW s1.test_view AS SELECT 42

statement ok
CREATE OR REPLACE VIEW s1.test_view AS SELECT 84

query I
SELECT * FROM s1.test_view
----
84

statement ok
DROP VIEW IF EXISTS s1.test_view

statement ok
DROP VIEW IF EXISTS s1.test_view

statement error
SELECT * FROM s1.test_view
----
test_view does not exist
